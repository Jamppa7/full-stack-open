{"version":3,"sources":["components/FilterForm.js","components/PersonForm.js","components/PersonsToShow.js","components/Person.js","components/Message.js","components/Error.js","services/persons.js","App.js","index.js"],"names":["FilterForm","filter","handleFilter","value","onChange","PersonForm","add","name","handleName","number","handleNumber","onSubmit","type","PersonsToShow","persons","newFilter","p","toLowerCase","indexOf","Person","remove","onClick","Message","message","className","Error","error","baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setNewFilter","setMessage","setError","useEffect","personService","allPersons","event","target","preventDefault","person","find","includes","window","alert","confirm","changedNumber","returnedPerson","map","setTimeout","catch","createdPerson","concat","deletePerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8d5ea591.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst FilterForm = ({ filter, handleFilter }) => {\r\n  return (\r\n    <div>\r\n      filter shown with: <input\r\n        value={filter}\r\n        onChange={handleFilter}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FilterForm\r\n","import React from 'react'\r\n\r\nconst PersonForm = ({ add, name, handleName, number, handleNumber }) => {\r\n  return (\r\n    <form onSubmit={add}>\r\n      <div>\r\n        name: <input\r\n          value={name}\r\n          onChange={handleName}\r\n        />\r\n      </div>\r\n      <div>\r\n        number: <input\r\n          value={number}\r\n          onChange={handleNumber}\r\n        />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm\r\n","const PersonsToShow = (persons, newFilter) => {\r\n  return persons.filter(p => p.name.toLowerCase().indexOf(newFilter.toLowerCase()) !== -1)\r\n}\r\n\r\nexport default PersonsToShow\r\n","import React from 'react'\r\n\r\nconst Person = ({ name, number, remove }) => {\r\n  return (\r\n    <li>\r\n      {name} {number} <button onClick={remove}>delete</button>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Person\r\n","import React from 'react'\r\n\r\nconst Message = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"message\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Message\r\n","import React from 'react'\r\n\r\nconst Error = ({ error }) => {\r\n  if (error === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"error\">\r\n      {error}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Error\r\n","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, remove, update }\r\n","import React, { useState, useEffect } from 'react'\nimport FilterForm from './components/FilterForm'\nimport PersonForm from './components/PersonForm'\nimport PersonsToShow from './components/PersonsToShow'\nimport Person from './components/Person'\nimport Message from './components/Message'\nimport Error from './components/Error'\nimport personService from './services/persons'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [message, setMessage] = useState(null)\n  const [error, setError] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(allPersons => {\n        setPersons(allPersons)\n      })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const person = persons.find(({ name }) => name === newName)\n\n    if (persons.includes(person)) {\n      if (person.number === newNumber) {\n        window.alert(`${newName} is already added to phonebook.`)\n      } else if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const changedNumber = { ...person, number: newNumber }\n\n        personService\n          .update(person.id, changedNumber)\n          .then(returnedPerson => {\n            setPersons(persons.map(p => p.id !== person.id ? p : returnedPerson))\n            setNewName('')\n            setNewNumber('')\n          })\n          .then(response => {\n            setMessage(\n              `Updated ${newName}`\n            )\n            setTimeout(() => {\n              setMessage(null)\n            }, 3000)\n          })\n          .catch(error => {\n            setError(\n              `The person ${person.name} was already deleted from server.`\n            )\n            setTimeout(() => {\n              setError(null)\n            }, 3000)\n            setPersons(persons.filter(p => p.id !== person.id))\n            setNewName('')\n            setNewNumber('')\n          })\n      }\n    } else {\n      const nameObject = {\n        name: newName,\n        number: newNumber\n      }\n\n      personService\n        .create(nameObject)\n        .then(createdPerson => {\n          setPersons(persons.concat(createdPerson))\n          setNewName('')\n          setNewNumber('')\n        })\n        .then(response => {\n          setMessage(\n            `Added ${newName}`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 3000)\n        })\n        .catch(error => {\n          setError(\n            `${error.response.data.error}`\n          )\n          setTimeout(() => {\n            setError(null)\n          }, 5000)\n        })\n    }\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const deletePerson = id => {\n    const person = persons.find(p => p.id === id)\n\n    if (window.confirm(`Delete ${person.name} ?`)) {\n      personService\n        .remove(id)\n        .then(response => {\n          setMessage(\n            `Deleted ${person.name}`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 3000)\n        })\n        .catch(error => {\n          setError(\n            `The person ${person.name} was already deleted from server.`\n          )\n          setTimeout(() => {\n            setError(null)\n          }, 3000)\n        })\n\n      setPersons(persons.filter(p => p.id !== id))\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message message={message} />\n      <Error error={error} />\n      <FilterForm filter={newFilter} handleFilter={handleFilterChange} />\n      <h3>Add a new</h3>\n      <PersonForm add={addPerson} name={newName} handleName={handleNameChange} number={newNumber} handleNumber={handleNumberChange} />\n      <h3>Numbers</h3>\n      <ul>\n        {PersonsToShow(persons, newFilter).map(p =>\n          <Person key={p.id} name={p.name} number={p.number} remove={() => deletePerson(p.id)} />\n        )}\n      </ul>\n    </div >\n  )\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App.js'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}
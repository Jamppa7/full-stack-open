(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),r=t.n(c),u=t(6),a=t(3),i=t(1),o=t(0),l=function(e){var n=e.filter,t=e.handleFilter;return Object(o.jsxs)("div",{children:["filter shown with: ",Object(o.jsx)("input",{value:n,onChange:t})]})},d=function(e){var n=e.add,t=e.name,c=e.handleName,r=e.number,u=e.handleNumber;return Object(o.jsxs)("form",{onSubmit:n,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:t,onChange:c})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:r,onChange:u})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},s=function(e,n){return e.filter((function(e){return-1!==e.name.toLowerCase().indexOf(n.toLowerCase())}))},f=function(e){var n=e.name,t=e.number,c=e.remove;return Object(o.jsxs)("li",{children:[n," ",t," ",Object(o.jsx)("button",{onClick:c,children:"delete"})]})},j=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"message",children:n})},b=function(e){var n=e.error;return null===n?null:Object(o.jsx)("div",{className:"error",children:n})},h=t(4),m=t.n(h),O="/api/persons",v=function(){return m.a.get(O).then((function(e){return e.data}))},p=function(e){return m.a.post(O,e).then((function(e){return e.data}))},x=function(e){return m.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},w=function(e,n){return m.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},g=function(){var e=Object(i.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(i.useState)(""),h=Object(a.a)(r,2),m=h[0],O=h[1],g=Object(i.useState)(""),T=Object(a.a)(g,2),N=T[0],S=T[1],k=Object(i.useState)(""),y=Object(a.a)(k,2),C=y[0],D=y[1],A=Object(i.useState)(null),E=Object(a.a)(A,2),F=E[0],J=E[1],L=Object(i.useState)(null),B=Object(a.a)(L,2),I=B[0],P=B[1];Object(i.useEffect)((function(){v().then((function(e){c(e)}))}),[]);return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(j,{message:F}),Object(o.jsx)(b,{error:I}),Object(o.jsx)(l,{filter:C,handleFilter:function(e){D(e.target.value)}}),Object(o.jsx)("h3",{children:"Add a new"}),Object(o.jsx)(d,{add:function(e){e.preventDefault();var n=t.find((function(e){return e.name===m}));if(t.includes(n)){if(n.number===N)window.alert("".concat(m," is already added to phonebook."));else if(window.confirm("".concat(m," is already added to phonebook, replace the old number with a new one?"))){var r=Object(u.a)(Object(u.a)({},n),{},{number:N});w(n.id,r).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),O(""),S("")})).then((function(e){J("Updated ".concat(m)),setTimeout((function(){J(null)}),3e3)})).catch((function(e){P("The person ".concat(n.name," was already deleted from server.")),setTimeout((function(){P(null)}),3e3),c(t.filter((function(e){return e.id!==n.id}))),O(""),S("")}))}}else p({name:m,number:N}).then((function(e){c(t.concat(e)),O(""),S("")})).then((function(e){J("Added ".concat(m)),setTimeout((function(){J(null)}),3e3)})).catch((function(e){P("".concat(e.response.data.error)),setTimeout((function(){P(null)}),5e3)}))},name:m,handleName:function(e){O(e.target.value)},number:N,handleNumber:function(e){S(e.target.value)}}),Object(o.jsx)("h3",{children:"Numbers"}),Object(o.jsx)("ul",{children:s(t,C).map((function(e){return Object(o.jsx)(f,{name:e.name,number:e.number,remove:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&(x(e).then((function(e){J("Deleted ".concat(n.name)),setTimeout((function(){J(null)}),3e3)})).catch((function(e){P("The person ".concat(n.name," was already deleted from server.")),setTimeout((function(){P(null)}),3e3)})),c(t.filter((function(n){return n.id!==e}))))}(e.id)}},e.id)}))})]})};t(39);r.a.render(Object(o.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.8d5ea591.chunk.js.map